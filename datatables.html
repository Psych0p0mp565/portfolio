<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables Demo - Janrafael F. Morga</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body {
            background: linear-gradient(135deg, #ecfdf5 0%, #e0f2fe 100%);
            min-height: 100vh;
            padding: 20px 0;
        }
        
        .container {
            max-width: 1400px;
        }
        
        .card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .card-header {
            background: linear-gradient(135deg, #059669, #2563eb);
            color: white;
            border: none;
        }
        
        .nav-tabs {
            border-bottom: 2px solid #059669;
        }
        
        .nav-tabs .nav-link {
            color: #059669;
            border: none;
        }
        
        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, #059669, #2563eb);
            color: white;
            border: none;
        }
        
        .table-container {
            position: relative;
        }
        
        /* Custom pagination position - top middle */
        .dataTables_paginate {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: auto;
        }
        
        /* Custom entries per page - bottom left */
        .dataTables_length {
            position: absolute;
            bottom: -60px;
            left: 0;
            margin-top: 20px;
        }
        
        /* Custom info - below entries per page */
        .dataTables_info {
            position: absolute;
            bottom: -60px;
            left: 200px;
            margin-top: 20px;
        }
        
        /* Column search inputs */
        .column-search {
            margin-bottom: 10px;
        }
        
        .column-search input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* Column visibility toggle */
        .column-toggle {
            margin-bottom: 15px;
        }
        
        .column-toggle label {
            margin-right: 15px;
            cursor: pointer;
        }
        
        /* Delete selected button */
        .delete-selected {
            margin-bottom: 15px;
        }
        
        /* Table wrapper spacing */
        .dataTables_wrapper {
            padding-bottom: 80px;
        }
        
        .table-top-controls {
            margin-bottom: 20px;
        }
        
        .table-wrapper {
            min-height: 400px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2 class="mb-0"><i class="fas fa-table"></i> DataTables Demo</h2>
            </div>
            <div class="card-body">
                <!-- Nav Tabs -->
                <ul class="nav nav-tabs" id="tableTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="table1-tab" data-bs-toggle="tab" data-bs-target="#table1" type="button" role="tab">
                            Table 1
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="table2-tab" data-bs-toggle="tab" data-bs-target="#table2" type="button" role="tab">
                            Table 2
                        </button>
                    </li>
                </ul>
                
                <!-- Tab Content -->
                <div class="tab-content" id="tableTabsContent">
                    <!-- Table 1 -->
                    <div class="tab-pane fade show active" id="table1" role="tabpanel">
                        <div class="table-container mt-4">
                            <div class="table-top-controls">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="column-toggle">
                                            <strong>Show/Hide Columns:</strong><br>
                                            <label><input type="checkbox" class="toggle-col" data-column="0" checked> ID</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="1" checked> Name</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="2" checked> Email</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="3" checked> Position</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="4" checked> Office</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="5" checked> Age</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="6" checked> Nationality</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <button class="btn btn-danger delete-selected" id="deleteSelected1">
                                            <i class="fas fa-trash"></i> Delete Selected
                                        </button>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <strong>Column Search:</strong>
                                        <div class="row">
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search ID" id="search-id-1">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Name" id="search-name-1">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Email" id="search-email-1">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Position" id="search-position-1">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Office" id="search-office-1">
                                            </div>
                                            <div class="col-md-1 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Age" id="search-age-1">
                                            </div>
                                            <div class="col-md-1 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Nationality" id="search-nationality-1">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-wrapper">
                                <table id="dataTable1" class="table table-striped table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Position</th>
                                            <th>Office</th>
                                            <th>Age</th>
                                            <th>Nationality</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via AJAX -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Table 2 -->
                    <div class="tab-pane fade" id="table2" role="tabpanel">
                        <div class="table-container mt-4">
                            <div class="table-top-controls">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="column-toggle">
                                            <strong>Show/Hide Columns:</strong><br>
                                            <label><input type="checkbox" class="toggle-col" data-column="0" checked> ID</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="1" checked> Name</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="2" checked> Email</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="3" checked> Position</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="4" checked> Office</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="5" checked> Age</label>
                                            <label><input type="checkbox" class="toggle-col" data-column="6" checked> Nationality</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <button class="btn btn-danger delete-selected" id="deleteSelected2">
                                            <i class="fas fa-trash"></i> Delete Selected
                                        </button>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12">
                                        <strong>Column Search:</strong>
                                        <div class="row">
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search ID" id="search-id-2">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Name" id="search-name-2">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Email" id="search-email-2">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Position" id="search-position-2">
                                            </div>
                                            <div class="col-md-2 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Office" id="search-office-2">
                                            </div>
                                            <div class="col-md-1 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Age" id="search-age-2">
                                            </div>
                                            <div class="col-md-1 column-search">
                                                <input type="text" class="form-control form-control-sm" placeholder="Search Nationality" id="search-nationality-2">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-wrapper">
                                <table id="dataTable2" class="table table-striped table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Position</th>
                                            <th>Office</th>
                                            <th>Age</th>
                                            <th>Nationality</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be loaded via AJAX -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    
    <script>
        // AJAX DataSource URL (using a public API that returns JSON with 7+ columns)
        // Using a free API that provides user data
        const ajaxUrl = 'https://jsonplaceholder.typicode.com/users';
        
        // Function to initialize DataTable
        function initializeTable(tableId, tableNum) {
            const table = $(`#${tableId}`).DataTable({
                ajax: {
                    url: ajaxUrl,
                    dataSrc: function(json) {
                        // Transform the data to include nationality and match our 7 columns
                        const nationalities = ['Filipino', 'American', 'British', 'German', 'French', 'Japanese', 'Korean', 'Australian', 'Canadian', 'Indian'];
                        return json.map((user, index) => ({
                            id: user.id,
                            name: user.name,
                            email: user.email,
                            position: user.company ? user.company.name : 'N/A',
                            office: user.address ? `${user.address.city}, ${user.address.street}` : 'N/A',
                            age: Math.floor(Math.random() * 30) + 25, // Random age 25-55
                            nationality: nationalities[index % nationalities.length]
                        }));
                    }
                },
                columns: [
                    { data: 'id' },
                    { data: 'name' },
                    { data: 'email' },
                    { data: 'position' },
                    { data: 'office' },
                    { data: 'age' },
                    { data: 'nationality' }
                ],
                select: {
                    style: 'multi',
                    selector: 'td:first-child'
                },
                columnDefs: [
                    {
                        targets: 0,
                        orderable: false,
                        searchable: false,
                        render: function(data, type, row) {
                            return '<input type="checkbox" class="row-select" value="' + data + '"> ' + data;
                        }
                    }
                ],
                order: [[1, 'asc']],
                pageLength: 10,
                dom: '<"row"<"col-sm-12"p>>rt<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"i>>',
                language: {
                    search: "", // Remove search label
                    searchPlaceholder: "",
                    lengthMenu: "Show _MENU_ entries",
                    info: "Showing _START_ to _END_ of _TOTAL_ entries",
                    infoEmpty: "Showing 0 to 0 of 0 entries",
                    infoFiltered: "(filtered from _MAX_ total entries)"
                },
                initComplete: function() {
                    // Hide default search field
                    $(this.api().table().container()).find('.dataTables_filter').hide();
                    
                    // Move pagination to top middle
                    const pagination = $(this.api().table().container()).find('.dataTables_paginate');
                    const wrapper = $(this.api().table().container()).closest('.table-container');
                    pagination.css({
                        'position': 'absolute',
                        'top': '-50px',
                        'left': '50%',
                        'transform': 'translateX(-50%)',
                        'z-index': '10'
                    });
                    
                    // Move length to bottom left
                    const length = $(this.api().table().container()).find('.dataTables_length');
                    length.css({
                        'position': 'absolute',
                        'bottom': '-60px',
                        'left': '0'
                    });
                    
                    // Move info below length
                    const info = $(this.api().table().container()).find('.dataTables_info');
                    info.css({
                        'position': 'absolute',
                        'bottom': '-60px',
                        'left': '200px'
                    });
                }
            });
            
            // Individual column searching
            $(`#search-id-${tableNum}`).on('keyup', function() {
                table.column(0).search(this.value).draw();
            });
            
            $(`#search-name-${tableNum}`).on('keyup', function() {
                table.column(1).search(this.value).draw();
            });
            
            $(`#search-email-${tableNum}`).on('keyup', function() {
                table.column(2).search(this.value).draw();
            });
            
            $(`#search-position-${tableNum}`).on('keyup', function() {
                table.column(3).search(this.value).draw();
            });
            
            $(`#search-office-${tableNum}`).on('keyup', function() {
                table.column(4).search(this.value).draw();
            });
            
            $(`#search-age-${tableNum}`).on('keyup', function() {
                table.column(5).search(this.value).draw();
            });
            
            $(`#search-nationality-${tableNum}`).on('keyup', function() {
                table.column(6).search(this.value).draw();
            });
            
            // Column visibility toggle
            $(`.tab-pane#table${tableNum} .toggle-col`).on('change', function() {
                const column = table.column($(this).data('column'));
                column.visible(!column.visible());
            });
            
            // Reapply custom layout on redraw
            table.on('draw', function() {
                const container = $(this.api().table().container());
                
                // Move pagination to top middle
                const pagination = container.find('.dataTables_paginate');
                pagination.css({
                    'position': 'absolute',
                    'top': '-50px',
                    'left': '50%',
                    'transform': 'translateX(-50%)',
                    'z-index': '10'
                });
                
                // Move length to bottom left
                const length = container.find('.dataTables_length');
                length.css({
                    'position': 'absolute',
                    'bottom': '-60px',
                    'left': '0'
                });
                
                // Move info below length
                const info = container.find('.dataTables_info');
                info.css({
                    'position': 'absolute',
                    'bottom': '-60px',
                    'left': '200px'
                });
                
                // Ensure search is hidden
                container.find('.dataTables_filter').hide();
            });
            
            return table;
        }
        
        // Initialize tables
        let table1, table2;
        
        // Initialize first table immediately
        table1 = initializeTable('dataTable1', 1);
        
        // Initialize second table when tab is shown
        let table2Initialized = false;
        $('#table2-tab').on('shown.bs.tab', function() {
            if (!table2Initialized) {
                table2 = initializeTable('dataTable2', 2);
                table2Initialized = true;
                
                // Set up checkbox updates for table2
                table2.on('draw', function() {
                    updateCheckboxes(table2);
                });
            }
        });
        
        // Delete selected rows
        $('#deleteSelected1').on('click', function() {
            const selected = table1.rows({ selected: true }).count();
            if (selected > 0) {
                if (confirm(`Are you sure you want to delete ${selected} selected row(s)?`)) {
                    table1.rows({ selected: true }).remove().draw();
                    alert(`${selected} row(s) deleted successfully!`);
                }
            } else {
                alert('Please select at least one row to delete.');
            }
        });
        
        $('#deleteSelected2').on('click', function() {
            if (!table2) return;
            const selected = table2.rows({ selected: true }).count();
            if (selected > 0) {
                if (confirm(`Are you sure you want to delete ${selected} selected row(s)?`)) {
                    table2.rows({ selected: true }).remove().draw();
                    alert(`${selected} row(s) deleted successfully!`);
                }
            } else {
                alert('Please select at least one row to delete.');
            }
        });
        
        // Row selection via checkbox
        $(document).on('change', '.row-select', function(e) {
            e.stopPropagation();
            const table = $(this).closest('table').DataTable();
            const row = table.row($(this).closest('tr'));
            if ($(this).is(':checked')) {
                row.select();
            } else {
                row.deselect();
            }
        });
        
        // Select row on click anywhere in the row
        $(document).on('click', '#dataTable1 tbody tr, #dataTable2 tbody tr', function(e) {
            if ($(e.target).is('input[type="checkbox"]')) return;
            const table = $(this).closest('table').DataTable();
            const row = table.row(this);
            const checkbox = $(this).find('.row-select');
            if (row.node()) {
                if (row.selected()) {
                    row.deselect();
                    checkbox.prop('checked', false);
                } else {
                    row.select();
                    checkbox.prop('checked', true);
                }
            }
        });
        
        // Update checkbox state when rows are selected/deselected programmatically
        function updateCheckboxes(table) {
            table.rows({ selected: true }).every(function() {
                $(this.node()).find('.row-select').prop('checked', true);
            });
            table.rows({ selected: false }).every(function() {
                $(this.node()).find('.row-select').prop('checked', false);
            });
        }
        
        // Update checkboxes on draw
        table1.on('draw', function() {
            updateCheckboxes(table1);
        });
    </script>
</body>
</html>

